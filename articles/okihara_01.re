= レガシーの棺

= レガシーの棺

@<b>{テック・ホラー長編小説}

@<i>{コードは嘘をつかない。嘘をつくのは、いつも人間だ。}

//hr

== 第1章　引き継ぎなき着任

後になって思えば、最初の違和感はあの匂いだった。

前任者のデスクに座った瞬間、かすかに漂ってきたエナジードリンクの甘い残り香。三ヶ月間、誰も片付けなかった空き缶。誰も座らなかった椅子。誰も開かなかった引き出し。そしてその引き出しの奥に転がっていた、「開けるな」と書かれた黒いUSBメモリ——。

だが、その話をする前に。

//hr

瀬川透は、オフィスビルの七階でエレベーターを降りた。

六月の東京。梅雨入り前の蒸し暑い月曜日だった。ワイシャツの背中がすでに湿っている。エントランスの自動ドアをくぐると、冷房の冷たい空気が頬に当たった。受付に名前を告げると、入館証を渡された。ストラップの色はオレンジ。「仮」と印字されている。

株式会社クラウドブリッジ。従業員八十名ほどの中堅SaaS企業。法人向けの業務管理ツール「BridgeFlow」を開発・運営している。導入企業は約三万社。面接では「成長フェーズの企業で、技術的な挑戦がしたい」と語った。半分は本心で、半分は嘘だった。

前職のスタートアップが資金調達に失敗して解散した。二十六歳。貯金は三ヶ月分。選べる立場ではなかった。クラウドブリッジの求人に応募したのは、Goのバックエンドエンジニアを募集していたからだ。それだけの理由だった。

「瀬川くんだね。待ってたよ」

開発部長の荻野武が、にこやかに手を振った。五十代半ば。銀縁の眼鏡にグレーのスーツ。白髪混じりの短髪。技術には明るくないが、人当たりだけは抜群に良い。面接でも技術的な質問は一切なかった。「うちは人柄重視だから」と笑っていた。その笑顔には人を安心させる力があった。

「まず社内を案内するね。こっちが開発フロア」

七階は全て開発部門だった。島型に配置されたデスク。四十人ほどのエンジニアが静かにキーボードを叩いている。異様なほど静かだ。前職のスタートアップは常に誰かが声を上げ、ホワイトボードの前で議論をしていた。ここには、そういう空気がない。声を出さない文化なのか、声を出せない文化なのか。初日の瀬川にはまだ分からなかった。

「あちらがCTOの黒木さん」

奥の窓際に、大柄な男が座っていた。四十代前半。黒いTシャツにジーンズ。エンジニアらしい風貌だが、目の下の隈が深い。瀬川が会釈すると、黒木は一瞬だけ視線を上げて頷いた。だがその目は瀬川を見ているようで、瀬川を通り過ぎて、どこか遠くを見ているようだった。

「黒木さんは忙しい人だから、あまり気にしないで」

荻野がフォローするように言った。

「今日から君の席はここね」

案内されたのは、窓際の席だった。モニターが二台。キーボードはHHKB。マウスはトラックボール。前の持ち主のこだわりがうかがえる。デスクの隅にはエナジードリンクの空き缶が二本、そのまま残されていた。付箋が一枚、モニターの縁に貼り付いている。何か書いてあったようだが、インクがかすれて読めなかった。

誰も片付けなかったのだ。三ヶ月間。

「前任の方は——」

「門倉くんね。三ヶ月前に突然来なくなったんだよ。理由？ 知らないよ。電話もメールも繋がらない。まあ、エンジニアってそういう人多いでしょ」

荻野はそう言って笑った。瀬川は笑えなかった。突然来なくなった人間の席に、何の説明もなく座らされている。その異様さに、フロアの誰ひとり触れようとしない。

「あ、瀬川さんですか？」

背後から声がかかった。振り返ると、同年代くらいの青年が立っていた。短い髪、丸い眼鏡、人懐っこい笑顔。Tシャツの胸にはReactのロゴ。

「佐々木遼です。フロントエンドやってます。先週入社したばかりで、ほぼ同期ですね。よろしくお願いします」

佐々木は明るかった。この静かなフロアでは異質なほどに。

「同じ時期に二人も入社って珍しいんですよ。普段は半年に一人くらいしか採用しないって聞きました」

「そうなんですか」

「門倉さんの後任と、あとフロントが人手不足で。僕は門倉さんとは面識ないんですけど、すごい人だったらしいですね。四年間ひとりでバックエンド全部見てたって」

佐々木はおしゃべりだった。悪い意味ではない。だが入社一週間でこれだけの情報を持っている人間を、瀬川は少し意外に感じた。

席に着く。キーボードに指を置いた。HHKBの打鍵感は悪くない。前任者の趣味が良かったことだけは確かだ。

人事からSlackのアカウントが発行された。GitHubのリポジトリにアクセス権が付与された。開発環境のセットアップ手順書を求めた。人事は困った顔をして、「開発部にあるはずです」と言った。荻野に聞くと、「門倉くんが残してるはずだよ。Confluenceかどこかに」と曖昧に答えた。

Confluenceを検索した。BridgeFlowのプロジェクトページ。最終更新日は二年前。内容は初期のアーキテクチャ概要図が一枚だけ。現在のコードとは大きく乖離しているだろう。

引き継ぎ資料を改めて求めると、荻野は「あるはずだよ」とだけ言って自席に戻った。「あるはず」。あるかないかも把握していない。それが、四年間一人でバックエンドを支えてきたエンジニアの失踪に対する、この会社の管理職の反応だった。

瀬川は自分でどうにかすることにした。エンジニアとはそういう生き物だ。ドキュメントがなければコードを読む。コードは嘘をつかない。

まずSlackを開いた。チャンネル一覧。 @<tt>{#dev-general} 、 @<tt>{#dev-backend} 、 @<tt>{#dev-infra} 、 @<tt>{#dev-frontend} 。他に @<tt>{#random} 、 @<tt>{#lunch} 、 @<tt>{#tech-news} 。標準的なSlackの構成。

門倉の名前で検索した。最後の発言を探す。三ヶ月前の金曜日。午後六時十二分。

//emlist{
門倉: お疲れ様でした
//}

それが門倉律の、この会社における最後の言葉だった。

何の変哲もない退社の挨拶。だがこの一言の後、門倉律はこの世界から消えた。翌月曜日、門倉は出社しなかった。火曜日も。水曜日も。電話は繋がらない。メールは返ってこない。自宅を訪ねた人事担当者によれば、部屋はもぬけの殻だったという。

「お疲れ様でした」。その一言が遺書のように見えてきた。

門倉の発言を遡った。最後の一週間分を、一つ一つ。業務連絡。プルリクエストのリンク。技術的な質問への回答。淡々としたメッセージが並んでいる。感情のない、機械的な文面。

だが一週間前を境に、発言の頻度が目に見えて減っていた。それまでは一日十件以上のメッセージを送っていた門倉が、最後の一週間は一日二〜三件。内容も短い。「了解」「確認します」「対応済み」。

最後の金曜日の午前中には、一件だけ少し長いメッセージがあった。

//emlist{
門倉: @channel 本日18時以降、本番DBのメンテナンスを実施します。
      作業時間は約30分の予定。影響はありません。
//}

影響はありません——。その夜、門倉は消えた。

GitHubでリポジトリを開いた。READMEを確認する。

//emlist[][markdown]{
# BridgeFlow

run `make dev`
//}

一行。たった一行だった。

前職のスタートアップでは、READMEだけで五百行あった。セットアップ手順、アーキテクチャ図、API仕様、コントリビューションガイドライン、ライセンス。それが当たり前だと思っていた。

ここでは、 @<tt>{make dev} の一行が引き継ぎの全てだ。

コードベースをクローンした。ターミナルを開く。

//emlist[][bash]{
git clone git@github.com:cloudbridge/bridgeflow.git
cd bridgeflow
//}

まずコミット数を確認する。

//emlist[][bash]{
git log --oneline | wc -l
//}

三千二百。四年分のコミット。一日あたり約二・二コミット。平日のみと仮定すればもう少し多い。コンスタントに、毎日コードを書き続けていた人間の痕跡。

コミッターの一覧を出した。

//emlist[][bash]{
git log --format='%an' | sort | uniq -c | sort -rn
//}

//emlist{
   2847 Ritsu Kadokura
    198 Takeshi Ogino
    112 Satoru Shiina
     43 Maho Hibino
//}

直近半年のコミッターは全て同じ名前だった。

@<tt>{Ritsu Kadokura}

門倉律。このコードベースを、四年間ほぼひとりで書き続けた男。荻野のコミットは設定ファイルの変更程度。椎名はインフラ関連のスクリプト。日比野はテスト関連——だがその数は僅かだ。実質的に、このプロダクトのコードは門倉一人の手によるものだった。

ソースコードの規模を確認した。

//emlist[][bash]{
find . -name "*.go" -not -path "./vendor/*" | xargs wc -l
//}

十万四千八百二十三行。

テストファイルを確認した。

//emlist[][bash]{
find . -name "*_test.go" | wc -l
//}

ゼロ。

十万行のコードに対して、テストがゼロ。ドキュメントはなし。コメントもほぼなし。CIも設定されていない。コードレビューの形跡もない。一人の人間が四年間、誰にもチェックされることなく、十万行のコードを書き続けた。

瀬川はモニターの前で深呼吸をした。これはコードベースではない。墓地だ。一人の人間が四年間を費やして、毎日少しずつ積み上げた墓石の集積。各ファイルが一つの墓標で、そこに刻まれた名前は全てRitsu Kadokura。三千二百のコミットは三千二百回の祈り——あるいは呪い——だ。

前職では考えられなかった。テストのないコードはマージできない。レビューの承認がなければデプロイできない。それが現代のソフトウェア開発の最低限の規範だ。チームで書き、チームでレビューし、チームで品質を保証する。ソフトウェア開発は本質的に共同作業だ。

ここにはそれがない。十万行の、裸のコードだけが前任者の全てを物語っていた。孤独な仕事だったことが、コミットログの一行一行から伝わってくる。

午後。周囲の席を確認した。右隣は空席。左隣に男が座っていた。椎名悟。インフラ担当。三十代前半。痩せた体躯。目の下に薄い隈がある。短く刈り込んだ髪。必要最低限の挨拶だけ交わし、黙々とターミナルに向かう寡黙な男だった。椎名のモニターにはGrafanaのダッシュボードが常時表示されていた。サーバーのメトリクスを、まるで心電図のように見守っている。

瀬川がコードを開いて読んでいるのを、椎名は横目で見ていた。しばらく黙っていたが、やがて口を開いた。

「全部読もうとしない方がいい。正気を保てなくなる」

冗談なのか本気なのか、判別がつかなかった。椎名の表情は一切変わらなかった。

「門倉さんのコード、どうやってメンテしてたんですか」

「してない。動いてる限り触らない。障害が出たら俺がサーバー側で対処する。アプリケーション層は門倉の領域だった。誰も踏み込まなかった」

「踏み込めなかった？」

椎名は一瞬だけ瀬川を見た。何か言いかけて、やめた。

「まあ、頑張れ」

それだけ言って、画面に向き直った。

昼休み。自販機でコーヒーを買い、席に戻った。缶コーヒーを開けながら、ふとペンが必要になった。メモを取ろうと思って。デスクの上にはペンがない。引き出しにあるかもしれない。

引き出しを開けた。

文房具が入っている。ボールペン、付箋、クリップ。前任者のものだろう。その奥に——。

黒いUSBメモリが転がっていた。

小さなラベルが貼ってある。油性ペンの手書き。几帳面な、だがわずかに震えたような字。

@<b>{「開けるな」}

瀬川はUSBメモリを摘まみ上げた。蛍光灯にかざすようにして眺める。容量は不明。メーカーのロゴもない。無地の黒いUSBメモリに、手書きのラベルだけ。

「開けるな」。普通なら、なぜそんなものを引き出しに残すのか。持ち出すか、捨てるか、少なくとも鍵のかかる場所にしまうのが自然だ。引き出しに残したということは——見つけてほしかったのか。

背後で、かすかに気配がした。空気が動いた。振り返ると、廊下の角に人影が見えた気がした。だが誰もいなかった。蛍光灯の光が壁に作る影が揺れているだけだった。

引き出しを閉めた。

USBメモリは、ポケットに入れた。

//hr

以下が元のやつ

これにフックを追加したりして膨らませた

== 第1章　引き継ぎなき着任

瀬川透は、オフィスビルの七階でエレベーターを降りた。

株式会社クラウドブリッジ。従業員八十名ほどの中堅SaaS企業。法人向けの業務管理ツール「BridgeFlow」を開発・運営している。面接では「成長フェーズの企業で、技術的な挑戦がしたい」と語った。半分は本心で、半分は嘘だった。

前職のスタートアップが資金調達に失敗して解散した。選べる立場ではなかった。

「瀬川くんだね。待ってたよ」

開発部長の荻野が、にこやかに手を振った。五十代半ば。技術には明るくないが、人当たりだけは良い。面接でも技術的な質問は一切なかった。

「今日から君の席はここね」

案内されたのは、窓際の席だった。モニターが二台。キーボードはHHKB。前の持ち主の趣味がうかがえる。デスクの隅にはエナジードリンクの空き缶が二本、そのまま残されていた。誰も片付けなかったのだ。三ヶ月間。

「前任の方は——」

「門倉くんね。三ヶ月前に突然来なくなったんだよ。理由？ 知らないよ。電話もメールも繋がらない。まあ、エンジニアってそういう人多いでしょ」

荻野はそう言って笑った。瀬川は笑えなかった。突然来なくなった人間の席に、何の説明もなく座らされている。その異様さに、周囲の誰も触れようとしない。

席に着く。Slackに招待された。GitHubのリポジトリにアクセス権が付与された。引き継ぎ資料を求めると、荻野は「あるはずだよ」とだけ言って自席に戻った。

READMEを開いた。

//emlist{
# BridgeFlow
run `make dev`
//}

一行。たった一行だった。

コードベースをクローンした。ターミナルを開く。

//emlist[][bash]{
git log --oneline | wc -l
//}

三千二百。四年分のコミット。直近のコミッターは全て同じ名前だった。

@<tt>{Ritsu Kadokura}

門倉律。このコードベースを、四年間ひとりで書き続けた男。

ソースコードの行数を確認する。

//emlist[][bash]{
find . -name "*.go" | xargs wc -l
//}

十万四千八百二十三行。

テストファイルを探した。

//emlist[][bash]{
find . -name "*_test.go"
//}

結果はゼロ。テストが一つもない。

ドキュメントを探した。@<tt>{docs/} ディレクトリは存在しない。コメントを探した。ほとんどない。あるのはコードだけだ。十万行のコードだけが、前任者の全てを物語っていた。

瀬川は椅子の背もたれに体を預けた。

前職ではCI/CDを整備し、テストカバレッジ90%を維持し、コードレビューには二名以上の承認を必須にしていた。それが自分の信じるソフトウェア開発だった。

目の前にあるのは、その信念を嘲笑うかのようなコードベースだった。

午後、隣の席のインフラ担当・椎名悟が出社してきた。三十代前半。目の下に薄い隈がある。画面を覗き込み、瀬川がコードを読んでいるのを見て、小さく首を振った。

「全部読もうとしない方がいい。正気を保てなくなる」

冗談なのか本気なのか、判別がつかなかった。

昼休み。自販機でコーヒーを買い、席に戻った。ペンを探そうと引き出しを開けた。

奥に、黒いUSBメモリが転がっていた。

小さなラベルが貼ってある。油性ペンの手書き。

@<b>{「開けるな」}

瀬川はUSBメモリを摘まみ上げ、しばらく眺めた。

それから、静かに引き出しを閉めた。

//hr
