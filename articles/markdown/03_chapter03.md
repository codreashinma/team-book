# 第3章　トークンの正体

---

　お金の正体は、七十八行のコードだった。

　フリーランス三日目の朝。蓮は自室のモニターに映るソースコードに、呼吸を忘れていた。きっかけは些細な好奇心だった。SDKのドキュメントを読み進めるうちに、「ERC-20トークンの仕組み」というページにたどり着き、そこにJ-Coinのコントラクトアドレスが記載されていた。

　「0x7B3f...8dA2」

　ブロックエクスプローラで検索すれば、誰でもコントラクトのソースコードを読めるらしい。蓮はPolygonScanを開き、アドレスを検索バーに貼り付けた。「Contract」タブ。「Code」。

　表示されたのは、Solidityという言語で書かれたプログラムだった。

　蓮はSolidityを一度も書いたことがない。でも三年間JavaScriptとTypeScriptを書いてきた目には、構文の骨格が読めた。変数宣言がある。関数がある。条件分岐がある。コメントの書き方まで似ている。まるで知らない国に来たのに、道路標識だけは読める——そんな感覚だった。

　そして、一行が目に飛び込んできた。

```solidity
mapping(address => uint256) private _balances;
```

　`mapping`。辞書型。連想配列。JavaScriptでいう`Map`やオブジェクトのようなもの。`address`をキーにして、`uint256`——符号なし二五六ビット整数——を値として持つ。

　蓮は三秒かけて、その意味を咀嚼した。

　「ウォレットアドレス → 残高」。

　J-Coinの残高は、この一行で定義されていた。銀行のメインフレームが何百万行ものCOBOLで管理しているはずの「誰がいくら持っているか」という情報が、ブロックチェーンの上ではたった一行の`mapping`に収まっている。

　蓮はスクロールを続けた。次に目を引いたのは——

```solidity
uint8 public decimals = 18;
```

　十八。

　昨日、`balanceOf`で返ってきた「100000000000000000000」の正体。あの十八桁のゼロの群れは、ここから来ていたのだ。ブロックチェーン上のトークンは整数しか扱えない。小数点を使えない代わりに、「小数点以下十八桁」という精度をこの一行で宣言している。100 J-Coinは、内部では100に10の18乗を掛けた巨大な整数として記録される。

　蓮は昨日の自分を思い出した。桁が多すぎると混乱し、kirishi_maに助けてもらった。あのとき自分がぶつかった壁の原因が、今、目の前のコードに一行で書かれている。

　さらにスクロールする。

```solidity
function balanceOf(address account) public view returns (uint256) {
    return _balances[account];
}
```

　残高照会。アドレスを渡すと、`_balances`の表から対応する数値を返す。それだけだ。ATMに表示される「お預かり残高」の裏側にあるものが、たった三行の関数だった。

　そして——

```solidity
function transfer(address to, uint256 amount) public returns (bool) {
    address owner = msg.sender;
    require(_balances[owner] >= amount, "Insufficient balance");
    _balances[owner] -= amount;
    _balances[to] += amount;
    emit Transfer(owner, to, amount);
    return true;
}
```

　`transfer`。送金。

　蓮は一行ずつ読んだ。`msg.sender`——この関数を呼び出した人のアドレス。`require`で残高不足をチェック。送り手の残高を減らし、受け手の残高を増やす。`Transfer`イベントを発行して記録を残す。`true`を返す。

　蓮はモニターから目を離し、自分の両手を見下ろした。

　昨日、テストネットで「送金」ボタンを押したとき、裏側ではこのコードが動いていた。自分の`_balances`から10が引かれ、Account 2の`_balances`に10が足された。それが「送金」の全貌だった。

　引いて、足して、記録する。

　それだけだ。

　銀行振込は違う。A銀行からB銀行にお金を送るには、全国銀行データ通信システムを経由し、日本銀行の当座預金で帳尻を合わせ、複数の中継システムが介在する。しかしブロックチェーン上の送金は、引き算と足し算。人類が最初に覚えた計算で、お金が動く。

　シンプルすぎて、逆に怖かった。

---

　もう一つ、理解できない関数があった。

```solidity
function approve(address spender, uint256 amount) public returns (bool) {
    _allowances[msg.sender][spender] = amount;
    emit Approval(msg.sender, spender, amount);
    return true;
}
```

　`approve`。直訳すれば「承認する」。自分のトークンを、別のアドレスが代わりに動かすことを許可する関数。そしてこの`approve`とセットで存在する`transferFrom`——許可された第三者が、本人に代わってトークンを移動させる。

　なぜ、そんなものが必要なのだ？

　自分で`transfer`すれば済む話ではないのか。ドキュメントを読み返したが、ユースケースの具体例が見つからない。技術的な仕様は書いてあるのに、「なぜ」が書かれていない。仕様書とはそういうものだ。Whatは語るが、Whyは語らない。

　蓮はDiscordを開いた。今回は`#sdk-help`ではなく、kirishi_maに直接DMを送った。二日前のやり取りで、質問を送るくらいの距離感は許されると感じていた。

> **fujisaki_ren**: すみません、また質問です。ERC-20の`approve`と`transferFrom`の仕組みは理解したんですが、なぜ必要なのかが分からなくて。`transfer`で十分では？

　返事は一分で来た。

> **kirishi_ma**: いい質問。`transfer`は「自分の手で渡す」。`approve` + `transferFrom`は「引き落とし」。
>
> 自動販売機を想像して。あなたが自販機にお金を入れる。それが`approve`。自販機がジュースの代金ぶんだけ取る。それが`transferFrom`。あなたがいちいち「120円送金」しなくても、自販機が必要な額を自動で引き出せる。
>
> スマートコントラクト同士の連携は、ほとんどこのパターンで動いてる。

　蓮の脳内で、歯車がかちりと噛み合った。

　`transfer`は人間が手動で呼ぶ関数だ。`approve` + `transferFrom`は、プログラムが自動で呼ぶ関数。つまりERC-20は最初から、人間だけでなく「コードがお金を動かす」ことを前提に設計されている。お金がプログラマブルである——その意味が、ようやく腑に落ちた。

> **fujisaki_ren**: なるほど。ERC-20はお金の仕様書であると同時に、プログラムとお金を接続するインターフェースでもある、ということですか。

> **kirishi_ma**: そういうこと。だからERC-20は「トークン標準」と呼ばれる。全員が同じインターフェースに従うから、どのトークンでも同じコードで扱える。J-CoinもUSDCもDAIも、`transfer`の呼び方は同じ。

　蓮はエンジニアとしての直感で、その設計の力を理解した。インターフェースの標準化。REST APIが世界に普及した理由と同じだ。全員が同じ約束事に従うから、組み合わせが爆発的に広がる。

> **kirishi_ma**: ところで、コントラクトのコード読んだんだ？

> **fujisaki_ren**: はい、PolygonScanで。

> **kirishi_ma**: 何を感じた？

　蓮は少し考えてから、正直に打った。

> **fujisaki_ren**: 怖かった。こんな短いコードがお金を定義していることが。

　既読がついてから、返信が来るまで三十秒の間があった。kirishi_maにしては長い。

> **kirishi_ma**: その感覚は正しい。
>
> ERC-20のコードはシンプルだけど、そのシンプルさが怖い。バグが一つあれば何十億円が消える。一度デプロイしたら修正が効かない。だからこそ監査が必要だし、テストを何百パターンも書く。
>
> 僕らがSDKを提供しているのは、個々の開発者がコントラクトの危険なレイヤーに直接触らなくていいようにするため。安全な抽象レイヤーを被せて、数行のコードで送金できるようにする。

> **fujisaki_ren**: SDKが「ガードレール」のようなものですか。

> **kirishi_ma**: 近い。ただ、もっと積極的な意味もある。
>
> ジェイコイン・ラボはインフラを作る会社だ。J-Coinというトークンと、それを扱うSDK・APIを提供する。でも、その上で何を建てるかは僕らが決めることじゃない。決済アプリかもしれないし、ポイントシステムかもしれないし、まだ誰も思いついていない何かかもしれない。
>
> 僕らはレールを敷く。走るのは、君たち外部の開発者だ。

　蓮はその最後の一行を、二度読んだ。

　「走るのは、君たち外部の開発者だ」。

　SIerにいた三年間、蓮は走る側ですらなかった。決められたレールの上を、決められた速度で、決められた方向に進む部品の一つだった。レールを敷く側でもなく、走る側でもなく、ただ載せられていた。

　でもここでは、レールはすでにある。J-CoinとSDK。その上を好きな方向に、好きな速度で走っていい。走り方を決めるのは、自分だ。

　蓮はキーボードから手を離し、窓の外を見た。午後の日差しが、向かいのアパートの壁を橙色に染めていた。

---

　その夜、蓮はYouTubeのおすすめに表示された一つの動画をクリックした。

　「【ジェイコイン・ラボCEO 丘部典孝】日本円ステーブルコインの未来を語る」

　再生数は八千回。サムネイルには、穏やかな目をした四十代の男性が映っている。蓮はホワイトペーパーの著者プロフィールで名前だけは見ていたが、動いている姿を見るのは初めてだった。

　配信は一時間半。蓮は最後まで目が離せなかった。

　丘部の話し方は静かだった。煽らない。「革命」とも「破壊」とも言わない。淡々と、しかし芯のある声で、J-Coinが生まれた経緯を語っていく。

　驚いたのは、技術の話よりも法律の話のほうがずっと長かったことだ。

「ステーブルコインを日本で発行するためには、法律の裏付けが要ります。僕らが最初にぶつかった壁は、コードでもサーバーでもなく、霞ヶ関でした」

　丘部は苦笑しながら言った。

「二〇二三年に改正資金決済法が施行されて、ステーブルコインが『電子決済手段』として法的に定義されました。それ以前は、法律上の居場所がなかった。技術としては存在しているのに、法律が認識していなかった」

　蓮は手元のノートに「電子決済手段」と書いた。初めて聞く言葉だった。

「暗号資産——ビットコインやイーサリアムは、価格が乱高下しますよね。法律上も『暗号資産』として分類されていて、決済手段としてはハードルが高い。でもJ-Coinは日本円と一対一で連動します。価格は変動しない。法律もその違いを認めて、暗号資産とは別の『電子決済手段』というカテゴリを新設してくれた」

　丘部がモニターに図を映した。

「電子決済手段として認められるためには、発行体が利用者の資産を信託保全しなければなりません。一億円ぶんのJ-Coinを発行したら、一億円を信託口座に預ける。万が一ジェイコイン・ラボが倒産しても、利用者のお金は守られる。これが法律の求める最低条件です」

　蓮は画面に身を乗り出した。

　コードだけでは、お金は作れない。

　ERC-20のスマートコントラクトは、トークンの「動き方」を定義する。誰が誰にいくら送れるか。残高はいくらか。それをプログラムとして保証する。しかし、そのトークンが「日本円と同じ価値を持つ」と社会に認めてもらうためには、法律という別のレイヤーが必要なのだ。

「お金って、結局は信頼のプロトコルなんですよ」

　丘部が言った。

「技術が信頼性を担保する。法律が正当性を担保する。その両方が揃って初めて、デジタルな日本円が成立する。どちらか一方しかなければ、それはただのトークンか、ただの紙切れです」

　蓮はノートを見下ろした。左ページには今日学んだ技術のメモ。ERC-20の関数たち、`mapping`の構造、`approve`と`transferFrom`のパターン。右ページには、たった今書き取ったばかりの法律のメモ。電子決済手段、信託保全、資金決済法。

　左ページと右ページ。コードと法律。

　どちらもルールだ。コードはコンピューターが従うルール。法律は人間が従うルール。J-Coinは、その両方の上に立っている。

　配信の終盤、視聴者からの質問が読まれた。

「開発者がJ-Coinの上でアプリを作る場合、その開発者にも法的な義務はありますか？」

　丘部は一拍置いてから答えた。

「いい質問です。J-Coin自体はジェイコイン・ラボが法令準拠で発行しています。でもその上で動くアプリを作る開発者も、自分のサービスの法的な立ち位置を理解しておく必要があります。たとえば決済を仲介する立場になるのか、純粋な技術提供なのか。ケースバイケースの判断が要ります」

　蓮の手が止まった。

　QRコード決済アプリを作って、商店街に導入する。そのとき、蓮自身はどういう法的立場になるのだ？　決済仲介業者か？　技術提供者か？　法律の世界では、何と呼ばれるのか？

　まだ一行もコードを書いていないのに、解かなければならない問題が増えていく。

---

　深夜一時。蓮はDiscordに戻った。kirishi_maのステータスはオンラインだった。

> **fujisaki_ren**: さっき丘部さんの配信を見ました。技術と法律が表裏一体という話、すごく腑に落ちました。

> **kirishi_ma**: あの配信見たんだ。丘部さんの話はいつ聞いてもブレない。

> **fujisaki_ren**: 一つ聞いてもいいですか。霧島さんはなぜジェイコイン・ラボに？

　踏み込みすぎたかと、送信した直後に思った。でも返事はすぐに来た。

> **kirishi_ma**: Ethereumの初期からスマートコントラクトを書いてきて、ずっと思ってたことがある。この技術は、投機じゃなくて実用に使われるべきだと。NFTバブルもDeFiの熱狂も見てきた。でも「普通の人が普通に使えるもの」は、なかなか生まれなかった。丘部さんのビジョンを聞いたとき、この人は本気で「普通の人」を見てると思った。

> **fujisaki_ren**: ……僕もそう思いました。ホワイトペーパーを読んだとき。

> **kirishi_ma**: 君の商店街の決済アプリ、まさにその方向だと思う。進捗あったら聞かせて。

　蓮は「ありがとうございます」と返して、Discordを閉じた。

　モニターにはまだ、J-Coinのスマートコントラクトが表示されていた。七十八行。`mapping`と`function`と`require`で組み上げられた、お金の骨格。

　蓮は新しいテキストファイルを開き、タイピングを始めた。

```
【決済アプリ構想メモ】

- ターゲット: 個人商店（根津商店街）
- J-CoinのSDKを使う
- 店舗がQRコードを表示 → 客がスキャンして支払い
- 手数料: ガス代のみ（1円未満）
- 課題①: 法律面の整理が必要
- 課題②: 根津さんを説得できるか
- 課題③: ブロックチェーン歴3日の自分に作れるのか
```

　三つの「課題」を書いて、蓮は手を止めた。

　一週間前なら、ここで閉じていた。SIerでは、課題が三つ以上あるプロジェクトは「リスクが高い」と却下された。リスクを取らないことが、最大の美徳だった。

　でも今は違う。課題が見えているということは、解くべき問題が明確だということだ。敵の顔が分かっている戦いは、暗闇で殴られるよりずっとましだ。

　蓮はファイルを保存し、MacBookを閉じた。

　七十八行のコードが、お金を定義する。

　しかし七十八行だけでは、お金にはなれない。法律がいる。ユーザーがいる。信頼がいる。蓮が作ろうとしているのは、アプリではなく、それら全部をつなぐ橋だ。

　まだ橋の設計図すらないが、渡るべき川は見えた。

　明日は、根津さんに会いに行こう。
