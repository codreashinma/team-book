= 第2章　Hello, Blockchain

//hr

　人生で最初のウォレットは、寝不足の頭で作った。

　午前六時。蓮は一睡もしていなかった。フリーランス初日の朝は、案件を探すでもなく、請求書のテンプレートを整えるでもなく、J-Coinの開発者ドキュメントを読みふけることで始まった。カーテンの隙間から差し込む朝日がモニターに白い線を引いている。コーヒーは三杯目が冷めたまま放置されていた。

　Getting Startedのページは、意外なほど親切だった。

　蓮はSIer時代に何十本ものAPIドキュメントを読んできたが、たいていは不親切で、肝心なところが省略されていた。しかしJ-CoinのSDKドキュメントは違った。前提知識がゼロでも、手順通りに進めれば動くように書かれている。「ブロックチェーンが初めての方は、まずウォレットを作成しましょう」——その一文に、蓮は少し救われた気がした。

　@<b>{ステップ1：ウォレットを作成する。}

　ドキュメントが最初に指示してきたのは、MetaMaskというブラウザ拡張のインストールだった。蓮はChromeウェブストアを開き、「MetaMask」で検索する。オレンジ色の狐のアイコン。レビュー件数が膨大で、少なくとも怪しいソフトではなさそうだ。「Chromeに追加」をクリック。数秒でインストールが完了し、ブラウザの右上に狐が住み着いた。

　起動すると、セットアップ画面が表示される。「新しいウォレットを作成」を選択。パスワードを設定すると——

　画面に、十二個の英単語が表示された。

//emlist{
apple  bridge  canyon  dust  eagle  frost
garden  harbor  island  jewel  karma  lunar
//}

　「この十二個の単語を、安全な場所に記録してください。この単語を知っている人は、あなたのウォレットに完全にアクセスできます。絶対に他人に教えないでください」

　蓮は画面を二度読んだ。十二個の英単語。これが、自分の「口座」を守る鍵のすべて。銀行口座なら暗証番号を忘れても窓口に行けば再発行してもらえる。しかしブロックチェーンのウォレットには「窓口」がない。この十二単語を失えば、中に入れたお金は永遠に取り出せなくなる。

　蓮はデスクの引き出しからノートを取り出し、ボールペンで一語一語、丁寧に書き写した。SIer時代の三年間で最も集中した瞬間は、本番サーバーのデータベースを手動で修正した夜だったが、今の緊張感はあのときに近い。いや、それ以上かもしれない。あのとき失敗しても会社が責任を取ってくれた。今は、自分しかいない。

　ノートを引き出しの奥にしまい、画面に戻る。十二単語の確認を終えると、MetaMaskのメイン画面が開いた。

　「0x7a3B...9f2E」

　画面の上部に表示された、長い英数字の羅列。これが蓮のウォレットアドレスだ。ドキュメントにはこう書かれている。「ウォレットアドレスは、あなたの銀行口座番号のようなものです。これは誰に教えても安全です。しかし秘密鍵やニーモニックフレーズは、絶対に他人に共有しないでください」

　口座番号は教えていい。暗証番号は教えちゃだめ。それは分かる。でもこの「0x」で始まる文字列が自分の口座番号だという実感が、まだ湧かない。銀行口座には自分の名前が紐づいているが、ウォレットアドレスにはどこにも「藤崎蓮」とは書かれていない。匿名の、ただの文字列。

　蓮は無意識にウォレットアドレスを声に出して読もうとして、やめた。読めるわけがない。

//hr

　@<b>{ステップ2：テストネットに接続する。}

　ドキュメントの次のセクションに進む。テストネット——テスト用のネットワーク。本番のブロックチェーン（メインネット）とほぼ同じ仕組みだが、そこで使われるトークンには実際の金銭的価値がない。練習場のようなものだ。

　J-CoinのSDKが推奨しているテストネットは「Polygon Amoy」。蓮はMetaMaskにネットワーク情報を追加した。チェーンID、RPCのURL、ブロックエクスプローラのアドレス。どれも意味は正確には分からないが、ドキュメントに書かれた値をコピー＆ペーストする。設定が終わると、MetaMaskの画面上部が「Ethereum Mainnet」から「Polygon Amoy Testnet」に切り替わった。

　残高は当然、ゼロだ。

　次にドキュメントは「Faucet（フォーセット）」を案内してきた。蛇口という意味らしい。テストネット用のトークンを無料で配布してくれるサービスだ。リンクをクリックし、自分のウォレットアドレスを入力し、「Request」ボタンを押す。

　十秒ほど待った。

　MetaMaskの残高が変わった。

　@<b>{0.5 POL}

　蓮は目を見開いた。たった今、地球のどこかにあるコンピューターが、蓮のウォレットアドレスに「0.5 POL」を送ったのだ。銀行を経由せず。決済代行業者を通さず。申込書も審査もなく、ウォレットアドレスを入力しただけで。テスト用の、金銭的価値のないトークンだと頭では分かっている。でも、画面の数字が「0」から「0.5」に変わったその瞬間、蓮の背筋を電流のようなものが走った。

　これが、ブロックチェーンか。

//hr

　@<b>{ステップ3：J-Coinを送金してみる。}

　ドキュメントはさらに続く。テストネット用のJ-Coinを取得し、別のアドレスに送ってみろ、と。蓮はFaucetからテスト用のJ-Coinを取得し、MetaMaskの残高に「100 JCOIN」が表示されるのを確認した。

　では、誰に送る？

　蓮は少し考え、MetaMaskでもう一つアカウントを作成した。「Account 2」。新しいウォレットアドレスが生成される。自分から自分への送金。意味があるのかと一瞬思ったが、練習だ。

　MetaMaskの「送金」ボタンを押す。宛先にAccount 2のアドレスを入力。金額は10 JCOIN。確認画面に「推定ガス代：0.0001 POL」と表示される。ガス代——トランザクションを処理するためにネットワークに支払う手数料。ドキュメントによれば、Polygonのガス代は通常1円未満だ。

　「確認」を押した。

　画面に「トランザクション送信中...」の文字が出る。

　五秒。

　十秒。

　ステータスが「確認済み」に変わった。

　Account 2の残高を確認する。「10 JCOIN」。

　——通った。

　蓮は声に出さなかったが、拳を握っていた。たった十トークン。テストネットの、価値のない数字。でもこの十トークンは、銀行もカード会社も決済代行業者も経由せずに、一つのアドレスから別のアドレスに移動した。その記録は、Polygon Amoyのブロックチェーン上に永遠に残る。

　蓮はドキュメントに記載されていたブロックエクスプローラのリンクを開いた。自分のトランザクションのハッシュを検索バーに貼り付ける。

　画面が表示された。

　送信元アドレス、受信先アドレス、金額、タイムスタンプ、ブロック番号、ガス代——すべてが一覧で表示されている。誰でも見られる。隠せない。改竄できない。たった今、蓮がこの世界に刻んだ、消えない足跡。

　蓮はモニターの前で、しばらく動けなかった。

　SIer時代、蓮が書いたコードは社内サーバーの奥深くで動いていた。ユーザーの顔は見えず、ログはセキュリティポリシーで閲覧制限がかかり、自分のコードがどう使われているか知る術がなかった。でもブロックチェーンは違う。自分の操作が、公開された台帳の上に、そのまま残る。

　透明すぎて、少し怖いくらいだった。

//hr

　興奮が落ち着くと、壁にぶつかった。

　SDKのドキュメントに従い、Node.jsのプロジェクトを作成してプログラムからJ-Coinを送金しようとした。Getting Startedのサンプルコードをコピーし、@<tt>{npm install}を叩き、スクリプトを実行する。

//emlist{
Error: contract address is not valid on this network
//}

　コントラクトアドレスがこのネットワークでは無効——。蓮はエラーメッセージとドキュメントを見比べた。サンプルコードに記載されたJ-Coinのコントラクトアドレスが、メインネット用のものになっていた。テストネット用のアドレスは別のページに記載されている。見つけるまでに二十分かかった。

　差し替えて再実行。

//emlist{
Transaction successful: 0x8f3a...b7c1
//}

　通った。今度はプログラムから。自分の書いたJavaScriptのコードが、ブロックチェーン上に取引を刻んだ。

　もう午後一時だった。フリーランス初日は、ほぼ丸一日をJ-Coinの送金テストに費やしたことになる。案件の一つも探していない。だが蓮は不思議と焦りを感じなかった。目の前に、まだ踏み入れたことのない領域が広がっている。その入り口に立っているという感覚が、腹の底から温かかった。

　しかし次の壁は、もっと厚かった。

　SDKのドキュメントをさらに読み進め、「トークン残高の取得」を試そうとした。サンプルコードをそのまま動かしたが、返ってくる値がおかしい。残高が「90000000000000000000」——桁が多すぎる。90 JCOINのはずが、18桁も余計な数字がついている。

　ドキュメントを遡って読む。見つけた。「J-Coinは18 decimalsのERC-20トークンです。残高取得時の値は最小単位（wei相当）で返されます」。つまり、ブロックチェーン上では100 JCOINは「100 × 10の18乗」として記録されている。小数点以下18桁の精度。

　頭では理解した。でも、コードでどう扱えばいい？　JavaScriptの@<tt>{Number}型では精度が足りない。ドキュメントには@<tt>{ethers.formatUnits()}を使えと書いてあるが、使い方のサンプルが見当たらない。

　蓮は三十分ほど自力で試行錯誤したが、うまくいかなかった。Stack Overflowも検索したが、ピンポイントの回答が見つからない。

　ふと、J-Coinの開発者向けドキュメントのフッターにリンクがあるのに気づいた。

　@<b>{「質問はDiscordで → J-Coin Developer Community」}

//hr

　蓮はDiscordをほとんど使ったことがなかった。

　アカウントは持っていたが、大学時代にゲームの通話用に作ったきりで、ほぼ放置していた。J-Coin Developer Communityの招待リンクをクリックすると、サーバーに入れた。

　最初に目に入ったのはチャンネルの数だった。@<tt>{#announcements}、@<tt>{#general}、@<tt>{#sdk-help}、@<tt>{#smart-contracts}、@<tt>{#ecosystem-projects}——英語と日本語が入り混じったチャンネル名が縦にずらりと並んでいる。蓮は@<tt>{#sdk-help}を開いた。

　過去のやり取りをスクロールする。同じようにSDKの使い方で困っている開発者たちの質問が並んでいた。そして、それに丁寧に回答しているアカウントがいくつかある。中でも目を引いたのは「kirishi_ma」というアカウントだった。J-Coin Labのバッジがついている。ラボのエンジニアだ。

　kirishi_maの回答は簡潔だが正確で、質問者のレベルに合わせて説明の粒度を変えていた。初心者には比喩を使い、経験者にはコードで答える。蓮は過去の回答を十件ほど読んで、この人なら聞ける、と思った。

　蓮はチャンネルに投稿した。

//quote{
@<b>{fujisaki_ren}: はじめまして。SDKのGetting Startedを試しています。@<tt>{balanceOf}で取得した値が18 decimals分の整数で返ってきて、ethers.jsの@<tt>{formatUnits}で変換しようとしているのですが、型エラーが出ます。BigNumberの扱い方がよくわかっていません。初歩的な質問ですみません。
//}

　送信ボタンを押した瞬間、心臓が跳ねた。馬鹿げていると分かっている。ただの技術質問だ。でも、見知らぬコミュニティに初めて自分の言葉を投げ込むのは、冷たい水に飛び込むのに似ている。

　返事は、十五分後に来た。

//quote{
@<b>{kirishi_ma}: はじめまして。ethers v6では@<tt>{formatUnits}の引数にBigIntをそのまま渡せます。v5とは型が違うのでサンプルコードが古い可能性があります。こう書いてみてください：

//emlist[][js]{
import { formatUnits } from 'ethers';
const balance = await contract.balanceOf(address);
const readable = formatUnits(balance, 18);
console.log(`${readable} JCOIN`);
//}

//quote{
ドキュメントのサンプルがv5準拠のままで、Issue立てておきます。指摘ありがとうございます 🙏
//}

　蓮はコードを試した。動いた。コンソールに「90.0 JCOIN」と表示される。正しい値だ。

　二つのことに驚いた。一つは、解決までの速さ。SIerで社内の別チームに問い合わせると、回答が来るまで三日かかることもざらだった。それが十五分。しかも的確。

　もう一つは、kirishi_maの最後の一行だ。「ドキュメントのサンプルがv5準拠のまま」——蓮が躓いたのは蓮のせいではなく、ドキュメント側の問題だった。そしてkirishi_maは蓮の質問を受けて、即座にIssueを立てると言っている。外部の開発者からのフィードバックが、SDKの改善に直接つながる。

　蓮は返信を打った。

//quote{
@<b>{fujisaki_ren}: 動きました！ ありがとうございます。v6とv5の違い、気づけませんでした。
//}

　kirishi_maからの返事は、すぐに来た。

//quote{
@<b>{kirishi_ma}: Getting Startedを一通り終えた感想があれば、ぜひ@<tt>{#feedback}チャンネルにも書いてください。外部の開発者が最初にどこで詰まるか、僕らにとって一番知りたい情報なので。
//}

　蓮は画面を見つめた。

　「僕らにとって一番知りたい情報」。

　SIerでは、バグ報告は「始末書」に近かった。誰が悪いのかを追及し、再発防止策を紙に書き、上長の承認印をもらう。でもこのDiscordでは、蓮がつまずいたことそのものが価値を持っている。初心者の戸惑いが、プロダクトを改善する燃料になる。

　蓮は@<tt>{#feedback}チャンネルを開き、Getting Startedで感じたことを書き始めた。テストネットの切り替え方が分かりにくかったこと。コントラクトアドレスがメインネット用とテストネット用でページが分かれていて迷ったこと。サンプルコードのバージョン齟齬。

　全部書き終えて送信した。文字数を見たら八百字を超えていた。長すぎたかと一瞬後悔したが、もう送ってしまった。

　深夜の通知音が、沈黙を破った。

//quote{
@<b>{kirishi_ma}: 詳しいフィードバックをありがとう。全部Issueに変換します。——ところで、J-CoinのSDKを使って何を作ろうとしているんですか？
//}

　蓮は指を止めた。

　何を作ろうとしているのか。まだ自分でも、はっきりとは言語化できていない。ただ、根津さんのぼやきと、ホワイトペーパーの「手数料を大幅に削減」という一文と、QRコードで「ピッ」と決済が通るぼんやりした映像が、頭の中で渦を巻いている。

　蓮は正直に打った。

//quote{
@<b>{fujisaki_ren}: まだ固まっていないんですが、商店街の個人店向けのQRコード決済アプリを考えています。J-CoinのSDKを使って、手数料をほぼゼロにできないかと。
//}

　送信してから、恥ずかしくなった。昨日まで「ブロックチェーン」の綴りすら怪しかった人間が、決済アプリを作るなどと。

　返事は、一分で来た。

//quote{
@<b>{kirishi_ma}: 面白い。まさにそういうユースケースのためにSDKを作っています。もし詰まったら、いつでもここで聞いてください。
//}

　たった二行だった。でも蓮は、その二行を三回読み返した。

　「まさにそういうユースケースのために」。

　自分が考えていることは、的外れではないのかもしれない。

　時計を見ると、午前一時を回っていた。フリーランス二日目も、案件を一つも探さないまま終わろうとしている。預金残高は着実に減っている。常識的に考えれば、こんなことをしている場合ではない。

　でも蓮のMacBookには、今日自分がブロックチェーンに刻んだトランザクションのハッシュが、ブロックエクスプローラの画面に表示されたまま残っていた。消えない記録。誰のものでもない、蓮だけの足跡。

　蓮はブラウザの新しいタブを開いた。J-CoinのSDKドキュメント。次のセクションは「ERC-20トークンの仕組み」。

　ページを開く。最初の一行を読んだ瞬間、また知らない単語が四つ飛び込んできた。

　蓮は笑った。昨日までなら、知らない単語は壁だった。今は、扉だ。
