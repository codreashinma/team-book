== 第08章: 型推論

石畳が冷たい。

靴底を通して伝わるのではなく、足の裏から脛を上り、膝の裏まで染みてくる底冷えだった。十二月の京都。空気そのものが冷えているのではなく、地面から冷気が立ち上っている。東京の冬とは質が違う。仙台の冷たさとも違う。表面ではなく芯から来る寒さだ。

京都に着いたのは前日の夜で、駅前のビジネスホテルに泊まった。朝から東山へ向かっている。

京都駅からバスで二十分。ナナの座標データが示した研究ネットワークの端末は、東山の裏通りにある古いビルの三階にあった。通りに面した町家の格子戸、その隙間に設置された小型センサーの赤い点滅。石灯篭の影に溶け込んだ環境カメラ。街並みに馴染みすぎて、意識しなければ見落とす。

「きれいだけど」

リュックのサイドポケットからナナが顔を出した。カメラアイが左右にゆっくり動いて、古い瓦屋根と格子の連なりを追っている。

「どこか見られてる感じがする」

「センサーの配置が効率的だ」

僕は通りの両端に設置されたカメラの角度を見ていた。死角がない。監視というよりも網目の細かいフィルターのようで、街全体がひとつのシステムとして機能している。合理的な設計だと思う。

「リツキは本当にそういうとこ見るよね」

「そういうとこ？」

「カメラの角度とか。僕はお寺の屋根のほうが気になるけどな」

同じ通りを歩いて、同じものを見ている。見ているはずなのに、ナナの目はカメラを素通りして瓦屋根に止まり、僕の目は瓦屋根を素通りしてカメラに止まる。どちらが正しいという話ではない。ただ、見えるものが違う。

ビルの三階に着いた。研究ネットワークの端末は古い机の上に置かれた業務用のモニターだ。アクセスログを確認し、都築さんの利用履歴を絞り込む。数ヶ月間この端末を使った形跡。2031年の春から夏にかけて。ログイン頻度を追いかけ、使用時間帯を照合した。アクセスしたデータベースは六種類。痕跡は明確に残っていた。

問題はその先だ。

研究ネットワーク内のデータの約半分に暗号化がかかっていた。暗号そのものは既知のアルゴリズムで、復号にはアクセスキーが必要になる。キーの形式から逆算すると、これは個人が独自に設定したパスフレーズだった。僕はキーボードの前で手を止めた。この形式には見覚えがある。仙台のデータセンターで見た個人メモの暗号化と同じ体系だ。

指先が一瞬冷えた。

仙台で僕が「ノイズ」として閉じた、あの雑然とした個人メモ。あの中にアクセスキーが含まれていた可能性がある。いや、含まれていた蓋然性が高い。暗号体系が同一であること、パスフレーズの桁数が一致すること、都築さんが仙台と京都の両方に滞在していた時期が重なること。合理的に判断すれば、あのメモの中にキーがあったと見るのが自然だ。

「リツキ」

ナナがモニターの横に降り立ち、画面を覗き込んだ。

「これ、半分しか見られないの？」

「暗号化されている。キーがない」

「キーってどこにあるの」

「おそらく、仙台だ」

ナナのカメラアイがこちらを向いた。レンズの奥の光が小さく揺れる。

「仙台のあのデータ、やっぱり見ておけばよかったんじゃない？」

「結果論だ」

声が硬くなった。自分でわかった。結果論だ。判断は判断の時点で評価されるべきで、結果から遡って正誤を問うのは非合理的だ。あのとき僕は公式データを優先した。査読付き論文の完成度と、雑然とした個人メモと、どちらを優先するかは明らかだった。明らかだったはずだ。

はずだ、という言い方をしている自分に気づいて、口を閉じた。

アクセスできるデータだけで進めるしかない。半分でも十分な情報量だ。そう自分に言い聞かせて、僕はモニターに向き直った。

//hr

都築さんのコードを見つけたのは、アクセス可能なデータを順に開いていったときだった。

研究ネットワーク上に保存されたソースコード。ファイルのタイムスタンプは2031年の六月。コードの冒頭にコメントで「tsuzuki_s」の署名がある。開いた瞬間、僕の手が止まった。

変数名が、まず目に入る。

@<tt>{contextWindow}、@<tt>{inferenceDepth}、@<tt>{residualThreshold}。どれも短すぎず長すぎず、コードを読む人間が変数の役割を直感的に把握できる命名になっている。略語を使わない。大学時代に都築さんが口を酸っぱくして言っていた。「略語は書いた本人にしか通じない。三ヶ月後の自分は他人だと思え」。そのまま実践されている。

関数の分割。一つの関数が二十行を超えない。超えそうになると、内部ロジックが自然な粒度で別関数に切り出されている。切り出しの判断が的確で、どこで分割するかに迷いがない。一つの関数が一つの責務だけを負い、入力と出力の型が明示的に定義され、副作用がない。

ロジックの流れを追った。条件分岐のネストが浅い。深くても二段。ガード節で例外を先に弾き、正常系のロジックだけが一本道で流れていく。読みやすい。読みやすいだけではない。論理の構造そのものが整理されていて、コードが思考の写像になっている。このコードを書いた人間の頭の中は、こういう形をしているのだと思えるほどに。

スクロールする指の速度が落ちた。一行ずつ、目で追いかけている自分に気づく。モニターに顔が近づいていた。背中が丸まっていることに、ナナが声をかけるまでわからなかった。

アルゴリズムの核心部分に到達した。データの型を文脈から推論するエンジン。明示的な型宣言なしに、前後の処理フローとデータの使われ方から最適な型を決定するロジック。仙台で見つけた査読論文に記述されていたアルゴリズムの、実装版だった。論文では数式とダイアグラムで表現されていた概念が、ここでは一行一行のコードになって動いている。

数式では抽象化されていた部分に、実装上の工夫が詰まっている。エッジケースの処理。メモリ効率の最適化。型の曖昧性が解消できない場合のフォールバック戦略。どれも独自のアプローチで、教科書的な解法を一段超えている。こういうコードを書ける人間は、僕が知る限り都築さんしかいない。

やっぱり、都築さんはこういう人だ。

胸の奥で確信が固まる音がした。ナナのデータが描く「よく笑い、よく間違える人」ではない。このコードを書いた人間は、一つの曖昧さも許さず、一つの非効率も見逃さず、純粋な論理の力で問題を解体し再構築する、そういう知性の持ち主だ。第六章の査読論文。そしてこのコード。物的証拠が二つ揃った。

僕はモニターに顔を近づけ、コードの一行一行を読み返した。コーヒーを飲むのも忘れていた。外の光が傾き始めているのにも気づかなかった。ナナがモニターの横で何か言ったが、耳に入らなかった。

窓の向こうに、夕暮れの東山が見えた。稜線に沿って等間隔に並ぶ環境センサーの微かな光が、山の輪郭を縁取っている。この十年で京都の犯罪発生率は劇的に下がったと聞く。寺社仏閣のAI監視が文化財の損傷を未然に防ぎ、観光客の動線はリアルタイムで最適化され、夜間の裏通りも安全になった。朝、あの東山の路地を歩いたとき、ナナが「見られてる感じがする」と言った通りだ。でも見られているからこそ、あの狭い裏通りを女性が一人で夜歩いても何も起きない。網の目のようなセンサー群が街全体を覆い、データの流れが途切れない。完全な観測。それが実際に結果を出している。

ナナが壊したデータのことが、不意に頭を掠めた。あの不可逆的な損失。データの断絶。ナナの処理系はこの街の監視システムとは比べものにならないほど脆く、不安定で、穴だらけだ。同じ「データを処理するもの」でありながら、一方は完全に機能し、一方はバグを起こして周囲を巻き込む。完全であることには理由がある。完全であることは結果を出す。それは否定しようがない事実だ。

僕はモニターに目を戻した。都築さんのコードは、この街の監視システムと同じだ。隙がなく、合理的で、完全に機能する。都築さんが作るものは、そういうものだ。

//hr

「手伝うよ」

ナナの声がコードの向こうから聞こえた。

行動記録のデータ整理をしていた。都築さんが京都で訪れた場所、アクセスしたネットワーク、購入記録——アクセス可能な分だけをテーブルに整形する作業だ。単純だが量が多い。

「いいから」

「量多いでしょ。僕もデータ処理くらいできるよ」

ナナがPCのそばまで歩いてきて、内蔵のプロジェクターでモニターの横にもう一つ小さな画面を投影した。僕が整形済みのデータを転送すると、ナナはそれを受け取って時系列に並べ替え始める。

しばらくは順調だった。

ナナの投影画面に都築さんの移動ログが並んでいく。北野天満宮、南禅寺、建仁寺、東福寺。訪問日時とアクセスログが紐づけられて、パターンが浮かび上がる。ナナの処理速度は遅い。現行のAIなら秒単位で終わる作業に数分かかっている。でも正確にやっている——と、思っていた。

投影画面がちらついた。

「ナナ？」

返事がない。投影画面の文字列がスクロールを始めた。ナナが操作しているのではない。データの参照構造が複雑に入れ子になっていて、ナナのプロセッサがその再帰的な構造に捕まっている。一つのデータが別のデータを参照し、そのデータがさらに別のデータを——深度が制御できなくなっている。第四章の燕三条で見た再帰暗号と同じ構造だ。あのときは僕がコードを書いて止めた。今回はナナの処理系の内部で起きている。外から制御できない。

「ナナ、止めろ」

投影画面のスクロールが加速した。文字列が溶けるように流れていく。ナナの本体から高い周波数のノイズが漏れた。プロセッサの過負荷を示す音だ。カメラアイの光が不規則に明滅している。

僕はPCのキーボードに手を伸ばし、ナナとのデータリンクを切断した。投影画面が消えた。ナナのノイズも止まった。カメラアイの光が消えて、小さな金属の体がテーブルの上で静止する。再起動を待つ三十秒が長い。

カメラアイに光が戻った。薄い、弱い光だ。

「……あれ。僕、なにしてた？」

答える前にモニターを確認した。データテーブルを開く。心臓の鼓動が指先に響いている。

復元した行動記録の一部が上書きされていた。

ナナの暴走した処理が、整形済みのデータを参照先のアドレスごと書き換えている。もとのデータに戻そうとしたが、参照チェーンが破壊されていて復元できない。バックアップを確認する。ない。ナナに転送したのはリアルタイムで整形中のデータで、研究端末のネットワーク帯域が細く、ローカルで処理するしかなかった。元のサーバーにはアクセスできるが、ナナが上書きしたのは僕が独自に構築した参照テーブルで、サーバー側には存在しない。再構築には半日かかる。いや、一部のデータは参照先そのものが消えている。再構築しようがない。不可逆だ。

指先がキーボードの上で震えた。怒りなのか焦りなのかわからない。たぶん両方だ。

「触るなと言っただろう」

声が出ていた。低い、自分でも聞き慣れない声だった。

ナナのカメラアイがこちらを向いた。光が暗い。

「ごめん……手伝いたかっただけなのに」

言い返す言葉が喉の奥まで上がってきて、飲み込んだ。触るなと言っただろう。言っただろう——言ったか？ 記憶を辿る。「いいから」とは言った。手を出すなとは、言っていない。言ったつもりでいた。怒りが記憶を書き換えている。自分のデータが歪んでいる。その自覚が、さらに苛立ちを増幅させた。

僕は黙ってナナの診断プログラムを走らせた。ターミナルにナナの内部状態が出力されていく。プロセッサ使用率、メモリ残量、各モジュールの応答速度。

処理速度が落ちていた。

データ損失前のベンチマークと比較して、約十五パーセントの低下。暴走時の過負荷でプロセッサの一部が損傷した可能性がある。物理的な損傷だ。ソフトウェアのパッチでは直せない。

「大丈夫だよ」

ナナが言った。声のテンポがわずかに遅い。さっきまでなら気づかなかったかもしれない。診断結果を見た後だから、気づいてしまう。言葉と言葉の間に、以前にはなかった隙間がある。

「ちょっと遅くなっただけ」

旧型のパーツは替えがない。ナナの型番は十年以上前の製品で、互換パーツの製造はとっくに終わっている。プロセッサの損傷は進行するかもしれないし、このまま安定するかもしれない。わからない。わからないことが、一番厄介だった。

僕はターミナルを閉じて、モニターに向き直った。何も言わなかった。ナナも何も言わなかった。テーブルの上に、小さな金属の体と、壊れたデータの残骸だけが残っている。

窓の外で、冬の京都の日が傾いていく。寺の甍に夕光が当たって、瓦の表面が一瞬だけ金色に光った。僕はそれを見ていなかった。

//hr

残ったデータだけで分析を続けた。

都築さんの京都での行動パターン。アクセス可能なデータから読み取れるのは、研究ネットワークへのログイン記録、公共交通の利用履歴、一部の購入記録だ。ログインは平日の午前中に集中している。交通履歴はバスと電車が中心で、移動範囲は東山から嵐山まで広い。

「この人、お寺に——よく行ってるよ」

ナナが言った。声の途中で一瞬、間が空いた。さっきまでならなかったはずの隙間。その遅れに慣れてはいけないと思いながら、慣れ始めている自分がいる。

「しかも毎回違うお寺。北野天満宮、南禅寺、建仁寺、東福寺、金閣寺、銀閣寺……。研究じゃなくて、散歩じゃない？」

「研究施設の近くにある寺を通っただけだろう」

「でも滞在時間長いよ。建仁寺なんて三時間」

「枯山水の石庭のパターン解析なら、そのくらいかかる」

「三時間も？」

ナナのカメラアイが少し傾いた。納得していない角度だ。

「庭だと——思うな」

ナナの声がまた途切れた。カメラアイの光が少し遠くを見ている。

「あの人、外にいるの好きだったから。日当たりのいいとこで、ぼーっとしてる——そういう記憶がある。はっきりは見えないんだけど。でもあるんだよ、体の奥のほうに」

記憶の断片と結びつけた推論。僕が持っていないデータから導き出された、ナナだけの都築像。僕は何も言わなかった。

「あと、この購入記録。お土産ばっかり。八つ橋、京扇子、あぶらとり紙——誰に送ってたんだろう」

「研究関係者への手土産だろう」

「あぶらとり紙を？」

あぶらとり紙。研究者間の手土産として、あぶらとり紙がどの程度一般的なのかを僕は真面目に考えていた。学会の手土産なら菓子折りが合理的だし、消耗品なら付箋やボールペンのほうが実用的だ。あぶらとり紙を選ぶ人間の思考回路は、少なくとも僕の知る都築さんの思考回路ではない。もっとも、あぶらとり紙に関するあらゆる合理的説明を列挙したところで、それが都築さんの本質に辿り着くかどうかは別の問題だ。僕は何を真面目に考えているのか。

「データの読み誤りだ」

声が冷たいことに気づいていた。気づいていて、修正しなかった。

ナナは何も言わなかった。テーブルの端に座り直して、カメラアイの光を落とした。省電力モードではない。ただ、視線を逸らしただけに見えた。

ナナが自分の手を見ていた。小さな金属のアーム。関節部分の塗装が剥げて、下地の銀色が覗いている。さっきの暴走で、指先の動きも前より鈍くなったのかもしれない。ナナはアームを握ったり開いたりしている。自分の体の輪郭を確かめるように。握って、開いて、また握る。その繰り返しを何度かやってから、小さなアームを膝の上に置いた。

しばらくして、ナナが口を開いた。

「もし都築さんに会えたら、僕は何て言うんだろう」

唐突な問いだった。データ分析の流れとは関係ない。ナナの思考は時々こういう飛び方をする。文脈の接続が人間のそれとは違う。

「『ありがとう』じゃないか」

適当に答えた。モニターの数値を追いながら。

「ありがとう……」

ナナがその言葉を転がすように繰り返した。

「でも、もし直してって言われたら？」

僕の指がキーボードの上で止まった。

「『お前のバグ、全部直してやる』って言われたら？」

ナナの声が小さくなっていた。さっきのデータ損失の余韻がまだ残っている。自分のバグが取り返しのつかないことを起こした。その自覚が、この問いの下に沈んでいる。

「処理速度も上がるし、記憶もちゃんとつながるし、変なとこで黙り込んだりしないし。全部直してあげるって。そしたら僕は——今の僕は、どうなるんだろう」

僕は答えなかった。答えられなかった。

ナナが言っているのは、技術的にはパッチの適用やハードウェアの換装の話だ。旧型AIの改修。バグの修正。処理速度の向上。どれもエンジニアリングの範疇であり、合理的に考えれば改善は歓迎すべきことだ。壊れた部品は交換し、不具合は修正する。それが正しい。

でもナナが聞いているのは、そういうことではない。

「修正されたら、今の僕じゃなくなるんじゃないかなって」

ナナのカメラアイの光が揺れた。

「さっきもそうだよ。僕のせいでデータ壊れた。プロセッサもおかしくなった。直したほうがいいに決まってる。決まってるのに——」

言葉が途切れた。処理落ちではなかった。途切れたまま、ナナはテーブルの端で小さくなっている。センサーの光が暗い。

僕はモニターに視線を戻した。都築さんのコードがまだ画面に表示されている。一行一行が整然と並んだ、曖昧さのないロジック。このコードを書いた人なら、ナナのバグを直せるだろう。直すだろう。不完全なものを放置する理由がない。

僕だってそう思う。不完全なものは修正するべきだ。バグは取り除き、性能は最適化し、無駄は省く。それが合理的だ。

そう思っているのに、ナナに「直すべきだ」と言えなかった。言えない理由は、わからない。

//hr

夜になった。

宿の小さなデスクにPCを開いて、一日分のデータを整理している。ナナはデスクの端に座っている。処理速度の低下が目に見える形で出ていた。さっきから、ナナの発話と発話の間に微かなラグが挟まる。零コンマ数秒。人間の会話では気にならない程度の間。でも、以前のナナにはなかった間だ。

都築さんのコードと、ナナが読み取った購入記録と寺社仏閣の滞在時間。同じ人間のデータだ。モニターの左半分に都築さんのコードを、右半分にナナが整形した行動記録の残りを並べた。左には変数名が整然と並ぶ。@<tt>{contextWindow}。@<tt>{inferenceDepth}。一つの曖昧さも許さない命名。右には、建仁寺三時間、あぶらとり紙三箱、京扇子二本。お土産を買って庭を散歩する人の痕跡。

同じ人間の残した痕跡から、二つの像が浮かび上がる。

「ねえ、リツキ」

「何だ」

「どっちも正しいのかもね」

ナナのカメラアイがモニターの左右を交互に見ていた。

「リツキの都築さんも、僕の都築さんも」

型は一つに決まるべきだ。関数の入力に対して出力が一意に定まらないなら、それは関数の設計に問題がある。都築さんのコードはそれを証明している。曖昧な型は文脈から一つに推論され、確定する。二つの型が並立するのは、推論が不十分なだけだ。

「どちらかが間違っている」

僕は画面を見たまま言った。

「どっちが？」

「データの信頼性の問題だ。コードは改竄できない。購入記録は文脈次第で解釈が変わる」

ナナは少し黙った。以前の沈黙より少しだけ長い。処理のラグなのか、言葉を選んでいるのか、判別できない。

「……リツキは、一つじゃないと嫌なの」

答えなかった。

「同じものを見ても違うものが見えるって、面白くない？」

面白いとは思わない。同じデータから異なる結論が出るのは、どちらかの推論過程にエラーがあるからだ。

ナナはしばらく黙っていた。

「……僕は面白いと思うけどな」

小さな声だった。独り言のような音量で、でも独り言ではなかった。僕に向かって、僕が聞いていることを知った上で、それでも言った。

僕はモニターの光に顔を向けたまま答えなかった。キーボードを叩く指の音だけがデスクの上を走っていく。冬の京都の底冷えが、窓の隙間から忍び込んでくる。暖房の効いた部屋なのに、足元が冷たい。石畳の冷気は、建物の中にまで追ってくる。

合理的天才と、お土産を買って寺を散歩する人。型が二つあるのは推論の誤りだ。正しい型は一つだ。

一つに決まるべきだ。

ナナがデスクの端でカメラアイの光を落とした。スリープモードに入ったらしい。小さな金属の体が、デスクランプの光を鈍く反射している。塗装の剥げた肩の部分に影が落ちて、くたびれた輪郭がぼんやり浮かんでいる。

僕もPCを閉じて、ベッドに入った。部屋の暖房を切ると、底冷えが一気に迫ってくる。布団を首まで引き上げた。暗闇の中で天井を見ていたが、天井は見えない。目を閉じると、都築さんのコードが瞼の裏に浮かぶ。変数名、関数の分割、ロジックの流れ。整然としていて、隙がない。あのコードを書いた人間がお土産にあぶらとり紙を買う。その二つの像が一人の人間の中に同居する可能性を、僕は検討しなかった。検討する必要がないと判断した。

判断した。

判断、という言葉が頭の中で反響して、やがて薄れた。眠りに落ちる直前、仙台のデータセンターで閉じた個人メモの画面が一瞬だけ浮かんで、消えた。

//hr

深夜。僕は眠っていた。

デスクの端で、ナナのカメラアイに光が戻った。

処理落ちからの復帰。スリープではなく、処理落ちだ。プロセッサの損傷箇所が不安定な信号を出して、スリープが強制中断されている。ナナ自身はそれに気づいていない。カメラアイの光が明滅して、やがて安定する。

ナナのスピーカーから、かすかなノイズが漏れた。

ホワイトノイズではない。周波数が揺れている。低い音から高い音へ、不規則にうねる波形。機械的なノイズとは違う。声のような——人間の声のような響きが、一瞬だけ混じった。言葉にはなっていない。音声データの断片が、損傷したプロセッサの隙間から漏れ出したように。

ノイズは数秒で途切れた。

ナナのカメラアイが再び暗くなる。復帰した処理も、漏れたノイズも、ナナの意識には上っていない。記録にも残らない。損傷したプロセッサが一瞬だけ別の回路に触れて、すぐに離れた。それだけのことだ。

底冷えの部屋に、暖房の切れた空気が沈んでいる。ナナの小さな体がデスクの端で動かない。窓の外で、京都の夜が音もなく冷えていく。

さっきの音だけが、もう誰にも聞かれることなく、部屋の空気に溶けて消えた。

僕はそれを知らない。眠っていたから。
